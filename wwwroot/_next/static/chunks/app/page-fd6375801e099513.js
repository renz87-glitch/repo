(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3998:(e,t,r)=>{Promise.resolve().then(r.bind(r,8142)),Promise.resolve().then(r.bind(r,7354)),Promise.resolve().then(r.bind(r,6555)),Promise.resolve().then(r.t.bind(r,3063,23))},6555:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(5155),l=r(2115),s=r(8142);let n=()=>{let{token:e}=(0,s.A)(),[t,r]=(0,l.useState)(null),[n,o]=(0,l.useState)(null),[i,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1),b="./api",p=async()=>{if(!e){alert("Effettua prima il login.");return}m(!1),c(!0),r(null);let t=performance.now();try{let a=await fetch("".concat(b,"/NetworkTest/download"),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.blob(),l=performance.now(),s=8*e.size;r(s/((l-t)/1e3)/1048576)}else m(!0)}catch(e){console.error("Download error:",e)}c(!1)},x=e=>{let t=new Uint8Array(e);for(let r=0;r<e;r+=65536){let a=Math.min(65536,e-r),l=t.subarray(r,r+a);crypto.getRandomValues(l)}return t},w=async()=>{if(!e){alert("Effettua prima il login.");return}m(!1),u(!0),o(null);let t=new Blob([x(0xa00000)],{type:"application/octet-stream"}),r=new FormData;r.append("file",t,"random.dat");let a=performance.now();try{if((await fetch("".concat(b,"/NetworkTest/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:r})).ok){let e=performance.now();o(0x5000000/((e-a)/1e3)/1048576)}else m(!0)}catch(e){m(!0),console.error("Upload error:",e)}u(!1)};return(0,a.jsxs)("div",{className:"p-6 bg-white rounded shadow-lg text-gray-800",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Test di Velocit\xe0 di Rete"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("button",{onClick:p,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded",children:"Avvia Test Download"}),i&&(0,a.jsx)("p",{className:"mt-2 text-blue-500 animate-pulse",children:"Download in corso..."}),null!==t&&!i&&(0,a.jsxs)("p",{className:"mt-2",children:["Velocit\xe0 di download: ",t.toFixed(2)," Mbps"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:w,className:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded",children:"Avvia Test Upload"}),d&&(0,a.jsx)("p",{className:"mt-2 text-green-500 animate-pulse",children:"Upload in corso..."}),h&&(0,a.jsx)("p",{className:"mt-2 text-red-500 animate-pulse",children:"Errore!"}),null!==n&&!d&&(0,a.jsxs)("p",{className:"mt-2",children:["Velocit\xe0 di upload: ",n.toFixed(2)," Mbps"]})]})]})}},7354:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(5155),l=r(2115),s=r(9923),n=r(8142);let o=()=>{let{token:e,login:t,disconnect:r,user:o}=(0,n.A)(),[i,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),h=async()=>{await t(i,d)},m=async()=>{c(""),u(""),await r()};return(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(s.P.div,{className:"bg-white p-4 rounded shadow-md w-full max-w-md",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0,y:-50},visible:{opacity:1,y:0,transition:{duration:.5}}},children:null==e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Login"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-gray-700",children:"Username"}),(0,a.jsx)("input",{id:"username",type:"text",className:"mt-1 block w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-500",value:i,onChange:e=>c(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-gray-700",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",className:"mt-1 block w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-500",value:d,onChange:e=>u(e.target.value)})]}),(0,a.jsx)(s.P.button,{type:"button",onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-blue-500 text-white py-2 rounded transition-colors hover:bg-blue-600",children:"Accedi"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-center",children:["Benvenuto ",o]}),(0,a.jsx)(s.P.button,{type:"button",onClick:m,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-blue-500 text-white py-2 rounded transition-colors hover:bg-blue-600",children:"Disconnetti"})]})})})}},8142:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,AuthProvider:()=>n});var a=r(5155),l=r(2115);let s=(0,l.createContext)(void 0),n=e=>{let{children:t}=e,[r,n]=(0,l.useState)(null),[o,i]=(0,l.useState)(null),c=async(e,t)=>{try{let r=await fetch("".concat("./api","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!r.ok){let e=await r.json();throw Error(e.message||"Login failed")}let a=await r.json();n(a.token),i(e)}catch(e){e instanceof Error?alert("Errore di login: "+e.message):alert("Errore di login: "+String(e))}},d=async()=>{try{if(!r)throw Error("Gi\xe0 disconnesso!");n(null),i(null)}catch(e){e instanceof Error?alert("Errore disconnect: "+e.message):alert("Errore disconnect: "+String(e))}};return(0,a.jsx)(s.Provider,{value:{token:r,login:c,disconnect:d,user:o},children:t})},o=()=>{let e=(0,l.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[33,441,684,358],()=>t(3998)),_N_E=e.O()}]);