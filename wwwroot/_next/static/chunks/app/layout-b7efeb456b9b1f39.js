(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2353:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_188709",variable:"__variable_188709"}},3133:(e,t,r)=>{Promise.resolve().then(r.bind(r,8142)),Promise.resolve().then(r.t.bind(r,2353,23)),Promise.resolve().then(r.t.bind(r,7275,23)),Promise.resolve().then(r.t.bind(r,9324,23))},7275:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}},8142:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,AuthProvider:()=>l});var o=r(5155),a=r(2115);let s=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[c,h]=(0,a.useState)("");(0,a.useEffect)(()=>{try{let e=window.localStorage.getItem("apiHostRoot");if(e){h(e);return}let t="http://localhost:5051/api";if(t){let e=t.replace(/\/?api\/?$/,"");h(e)}}catch(e){}},[]);let u=c?"".concat(c.replace(/\/$/,""),"/api"):"",d=async(e,t)=>{try{let r=await fetch("".concat(u,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!r.ok){let e="Login failed";try{let t=await r.json();e=(null==t?void 0:t.message)||e}catch(e){}throw Error(e)}let o=await r.json();l(o.token),i(e)}catch(e){throw e instanceof Error?e:Error(String(e))}},f=async()=>{try{if(!r)throw Error("Gi\xe0 disconnesso!");l(null),i(null)}catch(e){e instanceof Error?alert("Errore disconnect: "+e.message):alert("Errore disconnect: "+String(e))}};return(0,o.jsx)(s.Provider,{value:{token:r,login:d,disconnect:f,user:n,apiBaseUrl:u,apiHostRoot:c,setApiHostRoot:e=>{h(e);try{window.localStorage.setItem("apiHostRoot",e)}catch(e){}}},children:t})},n=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[519,441,684,358],()=>t(3133)),_N_E=e.O()}]);